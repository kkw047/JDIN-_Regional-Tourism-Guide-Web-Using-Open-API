<!DOCTYPE html>

<html lang="ko">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>여행 확정</title>

<style>

body {

font-family: Arial, sans-serif;

margin: 0;

padding: 20px;

background-color: #f8f9fa;

text-align: center;

}



.container {

max-width: 600px;

margin: 50px auto;

background-color: white;

padding: 30px;

border-radius: 10px;

box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

}



h1 {

color: #343a40;

margin-bottom: 20px;

}



p {

font-size: 18px;

color: #555;

margin-bottom: 10px;

}



.usercode {

font-weight: bold;

color: #007bff;

}



.action-button { /* 기존 mission-button 클래스명 변경 또는 공용으로 사용 */

display: inline-block;

margin-top: 30px;

padding: 12px 25px;

background-color: #28a745;

color: white;

border: none;

border-radius: 5px;

font-size: 16px;

cursor: pointer;

text-decoration: none;

transition: background-color 0.3s ease;

}



.action-button:hover {

background-color: #218838;

}



/* Modal Styles */

.modal-backdrop {

display: none; /* Hidden by default */

position: fixed;

top: 0;

left: 0;

width: 100%;

height: 100%;

background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */

z-index: 1000; /* Ensure it's on top */

}



.modal-content {

display: none; /* Hidden by default */

position: fixed;

top: 50%;

left: 50%;

transform: translate(-50%, -50%);

width: 90%;

max-width: 500px; /* Max width of mission window */

height: 80%;

max-height: 600px; /* Max height of mission window */

background-color: white;

border-radius: 8px;

box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);

z-index: 1001;

padding: 0; /* Padding will be handled by iframe or internal content */

overflow: hidden; /* To contain the iframe */

}



.modal-header {

padding: 10px 15px;

display: flex;

justify-content: space-between;

align-items: center;

border-bottom: 1px solid #eee;

}



.modal-title {

font-size: 1.25rem;

font-weight: bold;

}



.modal-close-button {

font-size: 1.5rem;

font-weight: bold;

color: #888;

background: none;

border: none;

cursor: pointer;

}



.modal-body {

width: 100%;

height: calc(100% - 50px); /* Adjust based on header height */

padding: 0;

overflow: auto; /* If content exceeds iframe, iframe itself will scroll */

}



.modal-body iframe {

width: 100%;

height: 100%;

border: none;

}



</style>

</head>

<body>

<div class="container">
<p>나의 여행 코드: <span class="usercode">{{ usercode }}</span></p>

<button class="action-button" onclick="openMissionModal('{{ usercode }}')">미션 창</button>

</div>



<div id="missionModalBackdrop" class="modal-backdrop"></div>

<div id="missionModalContent" class="modal-content">

<div class="modal-header">

<span class="modal-title">나의 미션</span>

<button class="modal-close-button" onclick="closeMissionModal()">&times;</button>

</div>

<div class="modal-body">

<iframe id="missionFrame" src="about:blank"></iframe>

</div>

</div>



<script>

const modalBackdrop = document.getElementById('missionModalBackdrop');

const modalContent = document.getElementById('missionModalContent');

const missionFrame = document.getElementById('missionFrame');



function openMissionModal(usercode) {

// Set the iframe src to load mission.html with the usercode

missionFrame.src = `/mission.html?usercode=${usercode}`; // (modified from window.open)



// Display the modal

modalBackdrop.style.display = 'block';

modalContent.style.display = 'block'; // Or 'flex' if using flex for centering

}



function closeMissionModal() {

// Hide the modal

modalBackdrop.style.display = 'none';

modalContent.style.display = 'none';



// Optional: Clear the iframe src to stop loading or free up resources

missionFrame.src = 'about:blank';

}



// Optional: Close modal if backdrop is clicked

modalBackdrop.addEventListener('click', function (event) {

if (event.target === modalBackdrop) {

closeMissionModal();

}

});

</script>

</body>

</html>
